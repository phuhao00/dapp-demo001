# STK 代币手动添加到 MetaMask 详细指南

## 重要信息
- **代币名称**: SimpleToken
- **代币符号**: STK
- **合约地址**: `0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0`
- **小数位数**: 18
- **网络**: Hardhat 本地网络 (Chain ID: 31337)

## 前提条件检查

### 1. 确认 MetaMask 已安装并配置
- 确保已安装 MetaMask 浏览器扩展
- 确认已添加 Hardhat 本地网络
- 确认已导入测试账户

### 2. 确认网络配置
**Hardhat 本地网络配置：**
- 网络名称: `Hardhat Local`
- RPC URL: `http://127.0.0.1:8545`
- 链 ID: `31337`
- 货币符号: `ETH`

## 手动添加 STK 代币步骤

### 方法一：通过 MetaMask 界面添加

1. **打开 MetaMask**
   - 点击浏览器右上角的 MetaMask 图标
   - 确保已切换到 "Hardhat Local" 网络

2. **进入代币管理**
   - 在 MetaMask 主界面，向下滚动到 "代币" 部分
   - 点击 "导入代币" 或 "Import tokens" 按钮

3. **选择自定义代币**
   - 点击 "自定义代币" 标签页

4. **填入代币信息**
   ```
   代币合约地址: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
   代币符号: STK (会自动填入)
   精度: 18 (会自动填入)
   ```

5. **确认添加**
   - 点击 "添加自定义代币" 按钮
   - 在确认页面点击 "导入代币"

### 方法二：通过 DApp 一键添加

1. **访问 DApp**
   - 打开浏览器访问: `http://localhost:5173/`

2. **连接钱包**
   - 点击 "连接钱包" 按钮
   - 在 MetaMask 弹窗中点击 "连接"

3. **添加代币**
   - 找到 "添加 STK 到 MetaMask" 按钮
   - 点击按钮
   - 在 MetaMask 弹窗中确认添加

## 验证添加成功

### 检查代币列表
1. 在 MetaMask 主界面查看代币列表
2. 应该能看到 "STK" 代币
3. 初始余额可能为 0

### 获取测试代币
如果余额为 0，可以通过以下方式获取测试代币：
1. 使用 DApp 的铸币功能
2. 从合约所有者账户转账

## 常见问题解决

### Q1: 找不到 "导入代币" 按钮
**解决方案：**
- 确保 MetaMask 版本是最新的
- 尝试刷新页面或重启浏览器
- 检查是否在正确的网络上

### Q2: 输入合约地址后没有自动填入符号和精度
**解决方案：**
- 确认合约地址输入正确
- 确认已连接到 Hardhat 本地网络
- 确认 Hardhat 节点正在运行
- 手动输入符号 "STK" 和精度 "18"

### Q3: 添加成功但看不到余额
**解决方案：**
- 刷新 MetaMask 页面
- 检查是否在正确的账户上
- 确认该账户是否有 STK 代币余额
- 尝试从 DApp 获取一些测试代币

### Q4: 提示 "无效的合约地址"
**解决方案：**
- 检查合约地址是否完整且正确
- 确认已连接到 Hardhat 本地网络 (Chain ID: 31337)
- 确认 Hardhat 节点正在运行
- 尝试重新部署合约

### Q5: DApp 一键添加功能不工作
**解决方案：**
- 打开浏览器开发者工具查看控制台错误
- 确认钱包已正确连接
- 确认网络配置正确
- 尝试手动添加方法

## 技术支持信息

### 调试信息
如果遇到问题，请检查以下信息：

1. **浏览器控制台日志**
   - 按 F12 打开开发者工具
   - 查看 Console 标签页的错误信息

2. **MetaMask 网络信息**
   - 当前网络名称
   - RPC URL
   - 链 ID

3. **合约部署状态**
   - Hardhat 节点是否运行
   - 合约是否成功部署
   - 合约地址是否正确

### 重置选项
如果所有方法都失败，可以尝试：

1. **重置 MetaMask 账户**
   - 设置 > 高级 > 重置账户
   - 注意：这会清除交易历史

2. **重新部署合约**
   - 停止 Hardhat 节点
   - 重新运行 `npx hardhat node`
   - 重新部署合约
   - 更新前端合约地址

3. **清除浏览器缓存**
   - 清除浏览器缓存和 Cookie
   - 重启浏览器

## 安全提醒

⚠️ **重要提醒：**
- 这是本地开发环境，使用的是测试代币
- 测试私钥仅用于开发，切勿在主网使用
- 重启 Hardhat 节点会重置所有数据

---

**如果按照以上步骤仍无法解决问题，请提供详细的错误信息以便进一步诊断。**